{"is_source_file": true, "format": "JavaScript", "description": "This file defines a React context-based state management system for an audio player, including actions, reducer, and context provider for handling playback, playlist queue, settings, and external interactions with an audio controller and storage.", "external_files": ["../utils/storage", "../lib/audioController"], "external_methods": ["storage.getJson", "storage.setJson", "audioController.setVolume", "audioController.setMuted", "audioController.subscribe", "audioController.load", "audioController.play", "audioController.pause", "audioController.seek", "audioController.toggle"], "published": ["PlayerProvider", "usePlayer"], "classes": [], "methods": [{"name": "clamp01(x)", "description": "Clamps a number between 0 and 1.", "scope": "", "scopeKind": ""}, {"name": "pick(arr, idx)", "description": "Safely retrieves an element from an array at a specified index.", "scope": "", "scopeKind": ""}, {"name": "shuffleArray(arr)", "description": "Creates a shuffled copy of an array using Fisher-Yates algorithm.", "scope": "", "scopeKind": ""}, {"name": "loadPersisted()", "description": "Loads persisted player state from storage and validates it.", "scope": "", "scopeKind": ""}, {"name": "savePersisted(state)", "description": "Saves current player state to storage.", "scope": "", "scopeKind": ""}, {"name": "PlayerProvider({ children })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "reducer(state, action)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "usePlayer()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["storage.getJson", "storage.setJson", "audioController.setVolume", "audioController.setMuted", "audioController.subscribe", "audioController.load", "audioController.play", "audioController.pause", "audioController.seek", "audioController.toggle"], "search-terms": ["PlayerContext", "audioController", "player state", "React context", "music player", "player store", "react hooks", "useReducer", "useContext"], "state": 2, "file_id": 46, "knowledge_revision": 102, "git_revision": "", "ctags": [{"_type": "tag", "name": "A", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^const A = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "PLAYER_PERSIST_KEY", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^const PLAYER_PERSIST_KEY = 'player.state.v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "PlayerContext", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^const PlayerContext = createContext(undefined);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "PlayerProvider", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^export function PlayerProvider({ children }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ children })"}, {"_type": "tag", "name": "SET_INDEX", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^  SET_INDEX: 'SET_INDEX',$/", "language": "JavaScript", "kind": "property", "scope": "A", "scopeKind": "class"}, {"_type": "tag", "name": "SET_PLAYING", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^  SET_PLAYING: 'SET_PLAYING',$/", "language": "JavaScript", "kind": "property", "scope": "A", "scopeKind": "class"}, {"_type": "tag", "name": "SET_QUEUE", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^  SET_QUEUE: 'SET_QUEUE',$/", "language": "JavaScript", "kind": "property", "scope": "A", "scopeKind": "class"}, {"_type": "tag", "name": "SET_SETTINGS", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^  SET_SETTINGS: 'SET_SETTINGS',$/", "language": "JavaScript", "kind": "property", "scope": "A", "scopeKind": "class"}, {"_type": "tag", "name": "UPDATE_PROGRESS", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^  UPDATE_PROGRESS: 'UPDATE_PROGRESS',$/", "language": "JavaScript", "kind": "property", "scope": "A", "scopeKind": "class"}, {"_type": "tag", "name": "clamp01", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^function clamp01(x) { return Math.min(1, Math.max(0, Number(x) || 0)); }$/", "language": "JavaScript", "kind": "function", "signature": "(x)"}, {"_type": "tag", "name": "currentIndex", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^  currentIndex: -1,$/", "language": "JavaScript", "kind": "property", "scope": "initial", "scopeKind": "class"}, {"_type": "tag", "name": "duration", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^  duration: 0,$/", "language": "JavaScript", "kind": "property", "scope": "initial", "scopeKind": "class"}, {"_type": "tag", "name": "initial", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^const initial = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "loadPersisted", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^function loadPersisted() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "muted", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^  muted: false,$/", "language": "JavaScript", "kind": "property", "scope": "initial", "scopeKind": "class"}, {"_type": "tag", "name": "pick", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^function pick(arr, idx) { return idx >= 0 && idx < arr.length ? arr[idx] : undefined; }$/", "language": "JavaScript", "kind": "function", "signature": "(arr, idx)"}, {"_type": "tag", "name": "playing", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^  playing: false,$/", "language": "JavaScript", "kind": "property", "scope": "initial", "scopeKind": "class"}, {"_type": "tag", "name": "position", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^  position: 0,$/", "language": "JavaScript", "kind": "property", "scope": "initial", "scopeKind": "class"}, {"_type": "tag", "name": "queue", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^  queue: [], \\/\\/ [{ id, title, artist, duration, albumArt, audioUrl }]$/", "language": "JavaScript", "kind": "property", "scope": "initial", "scopeKind": "class"}, {"_type": "tag", "name": "reducer", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^function reducer(state, action) {$/", "language": "JavaScript", "kind": "function", "signature": "(state, action)"}, {"_type": "tag", "name": "repeat", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^  repeat: 'off', \\/\\/ 'off' | 'one' | 'all'$/", "language": "JavaScript", "kind": "property", "scope": "initial", "scopeKind": "class"}, {"_type": "tag", "name": "savePersisted", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^function savePersisted(state) {$/", "language": "JavaScript", "kind": "function", "signature": "(state)"}, {"_type": "tag", "name": "shuffle", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^  shuffle: false,$/", "language": "JavaScript", "kind": "property", "scope": "initial", "scopeKind": "class"}, {"_type": "tag", "name": "shuffleArray", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^function shuffleArray(arr) {$/", "language": "JavaScript", "kind": "function", "signature": "(arr)"}, {"_type": "tag", "name": "usePlayer", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^export function usePlayer() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^  return <PlayerContext.Provider value={value}>{children}<\\/PlayerContext.Provider>;$/", "language": "JavaScript", "kind": "field", "scope": "Provider", "scopeKind": "class"}, {"_type": "tag", "name": "volume", "path": "/home/kavia/workspace/code-generation/music-streamer-199976-200027/frontend_react/src/state/playerStore.js", "pattern": "/^  volume: 0.7,$/", "language": "JavaScript", "kind": "property", "scope": "initial", "scopeKind": "class"}], "hash": "98af001b19b7d41609037f5c79b1747d", "format-version": 4, "code-base-name": "frontend_react", "filename": "frontend_react/src/state/playerStore.js", "fields": [{"name": "SET_INDEX: 'SET_INDEX',", "scope": "A", "scopeKind": "class", "description": "unavailable"}, {"name": "SET_PLAYING: 'SET_PLAYING',", "scope": "A", "scopeKind": "class", "description": "unavailable"}, {"name": "SET_QUEUE: 'SET_QUEUE',", "scope": "A", "scopeKind": "class", "description": "unavailable"}, {"name": "SET_SETTINGS: 'SET_SETTINGS',", "scope": "A", "scopeKind": "class", "description": "unavailable"}, {"name": "UPDATE_PROGRESS: 'UPDATE_PROGRESS',", "scope": "A", "scopeKind": "class", "description": "unavailable"}, {"name": "currentIndex: -1,", "scope": "initial", "scopeKind": "class", "description": "unavailable"}, {"name": "duration: 0,", "scope": "initial", "scopeKind": "class", "description": "unavailable"}, {"name": "muted: false,", "scope": "initial", "scopeKind": "class", "description": "unavailable"}, {"name": "playing: false,", "scope": "initial", "scopeKind": "class", "description": "unavailable"}, {"name": "position: 0,", "scope": "initial", "scopeKind": "class", "description": "unavailable"}, {"name": "queue: [], \\/\\/ [{ id, title, artist, duration, albumArt, audioUrl }]", "scope": "initial", "scopeKind": "class", "description": "unavailable"}, {"name": "repeat: 'off', \\/\\/ 'off' | 'one' | 'all'", "scope": "initial", "scopeKind": "class", "description": "unavailable"}, {"name": "shuffle: false,", "scope": "initial", "scopeKind": "class", "description": "unavailable"}, {"name": "return <PlayerContext.Provider value={value}>{children}<\\/PlayerContext.Provider>;", "scope": "Provider", "scopeKind": "class", "description": "unavailable"}, {"name": "volume: 0.7,", "scope": "initial", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"102": ""}]}